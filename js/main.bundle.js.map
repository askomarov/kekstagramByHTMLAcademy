{"version":3,"sources":["webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/big-picture.js","webpack://kekstagram/./source/js/create-pictures-elemtns.js","webpack://kekstagram/./source/js/scale-upload-img.js","webpack://kekstagram/./source/js/slider-img-filter.js","webpack://kekstagram/./source/js/form.js","webpack://kekstagram/./source/js/user-modal.js","webpack://kekstagram/./source/js/tags-comment-validate.js","webpack://kekstagram/./source/js/img-filter.js","webpack://kekstagram/./source/js/main.js","webpack://kekstagram/./source/js/get-send-data.js"],"names":["isEscEvent","evt","key","showAlert","message","alertContainer","document","createElement","style","zIndex","position","left","top","width","height","transform","padding","fontSize","textAlign","backgroundColor","textContent","body","append","setTimeout","remove","bigPic","querySelector","closeBigImg","socialCommentCountBlock","btnSocialCommentsLoader","bigPicCommentsList","onLikesCountClick","target","classList","contains","Number","add","commentsFragments","DocumentFragment","renderCommentsCount","num","length","innerHTML","closeBigPicture","removeEventListener","onPopupEscKeydown","onBtnComment","visibleCommentsLength","preventDefault","showVisibleComments","comments","querySelectorAll","index","element","createPicturesElemts","pictures","picturesElementsList","pictureElementTemplate","content","similiarPicturesFragment","createDocumentFragment","forEach","picture","pictureElemet","cloneNode","src","url","likes","alt","description","appendChild","addEventListener","minPicture","item","comment","commentElement","avatar","name","createCommentElemnt","renderCommets","uploadImg","onbuttonSetScaleValue","button","button2","input","btnValue","btnOffValue","img","removeAttribute","value","Math","abs","setAttribute","newValue","numInValue","split","newNum","newArrayValue","push","setImgTransformeStyle","getInputValue","sliderFilter","filterControlsInput","effectLevel","uploadForm","errorMessageTemplate","mainContentWrap","resetFormsData","reset","filter","closeUploadModal","onEscKeydownCloseError","closePopupError","onClickCloseError","closest","onBtnCloseError","onFailSubmit","messageElement","showErrorPopupMessage","successMessageTemplate","closeSuccessPopup","onEscKeydownCloseSuccess","onClickCloseSuccess","onBtnCloseSuccess","onSuccessSubmit","showSuccessPopupMessage","FILE_TYPES","scaleValueInput","scaleButtonBigger","scaleButtonSmaller","uploadInput","uploadOverlay","closeCancelButton","onModalEscKeydown","onUploadShowModal","sliderElement","noUiSlider","create","range","min","max","start","format","to","isInteger","toFixed","from","parseFloat","on","_","handle","unencoded","changeFilterImageValue","array","updateOptions","step","changeSliderOption","checked","changeFilterImg","inputTags","commentInput","checkValidityTag","tag","match","onEcsKeyDown","stopPropagation","imgFilter","imgFilterBtnDefault","imgFilterBtnRandom","imgFilterBtnDiscussed","delPictures","getDataSuccess","data","debounce","sort","a","b","id","sortImagesById","getDefaultImages","RANDOM_COUNT","randomUniqData","round","random","includes","undefined","getRandomUniqElemets","getRandomImages","commentsA","commentsB","sortImagesByComments","getMostCommentedImges","renderFilteredImages","sendURL","onSuccess","onFail","fetch","method","credentials","then","response","ok","json","Error","status","statusText","catch","err","file","files","fileName","toLowerCase","some","it","endsWith","reader","FileReader","result","readAsDataURL","string","trim","setCustomValidity","tags","Set","size","i","startsWith","boxShadow","runValidateTags","reportValidity","sendUrl","sendData","FormData"],"mappings":"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","file":"main.bundle.js","sourcesContent":["const getRandomInteger = function (min, max) {\n  if (min < 0 || max < 0) {\n    return false;\n  }\n  if (max < min) {\n    return Math.round(Math.random() * (min - max)) + max;\n  }\n  if (min === max) {\n    return min;\n  }\n  return Math.round(Math.random() * (max - min)) + min;\n};\n\nconst getRandomUniqElemets = (data, RANDOM_COUNT) => {\n  const randomUniqData = [];\n  while (randomUniqData.length < RANDOM_COUNT) {\n    const element = data[getRandomInteger(0, data.length)];\n    if (!randomUniqData.includes(element) && element !== undefined) {\n      randomUniqData.push(element);\n    }\n  }\n  return randomUniqData;\n};\n\nconst isEscEvent = (evt) => {\n  return evt.key === ('Escape' || 'Esc');\n};\n\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 1000;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = '50%';\n  alertContainer.style.top = '50%';\n  alertContainer.style.width = '320px';\n  alertContainer.style.height = 'auto';\n  alertContainer.style.transform = 'translate(-50%, -50%)';\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'tomato';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, 5000);\n};\n\nexport { getRandomInteger, getRandomUniqElemets, isEscEvent, showAlert };\n","import { isEscEvent } from './util.js';\n\nconst DEFAULT_VISIBLE_COMMENTS = 5;\n\nconst bigPic = document.querySelector('.big-picture');\nconst closeBigImg = bigPic.querySelector('.big-picture__cancel');\nconst socialCommentCountBlock = bigPic.querySelector('.social__comment-count');\nconst btnSocialCommentsLoader = bigPic.querySelector('.social__comments-loader');\nconst bigPicCommentsList = bigPic.querySelector('.social__comments');\n\nconst onLikesCountClick = (evt) => {\n  if (evt.target.classList.contains('likes-count--active')) {\n    evt.target.textContent = Number(evt.target.textContent) - 1;\n    evt.target.classList.remove('likes-count--active');\n    return;\n  } else {\n    evt.target.textContent = Number(evt.target.textContent) + 1;\n    evt.target.classList.add('likes-count--active');\n    return;\n  }\n};\n\nconst onLikesCountClickListener = () => {\n  const likesCount = document.querySelector('.likes-count');\n  likesCount.addEventListener('click', onLikesCountClick)\n};\n\n// фрагмент для комментариев\nconst commentsFragments = new DocumentFragment();\n// функция генерации элемента комментария\nconst createCommentElemnt = (item) => {\n  const commentElement = document.createElement('li');\n  commentElement.classList.add('social__comment')\n  commentElement.innerHTML = `<img\n      class=\"social__picture\"\n      src=\"${item.avatar}\"\n      alt=\"${item.name}\"\n      width=\"35\" height=\"35\">\n  <p class=\"social__text\">${item.message}</p>`\n  commentsFragments.appendChild(commentElement);\n};\n//  // вставляем в список комментариев - фото и текст автора комментария к конкретной фотографии\nconst renderCommets = (item) => {\n  const comments = item.comments;\n  if (comments.length === 0) {\n    bigPicCommentsList.innerHTML = '';\n  } else {\n    comments.forEach(comment => {\n      bigPicCommentsList.innerHTML = '';\n      createCommentElemnt(comment);\n    })\n    bigPicCommentsList.appendChild(commentsFragments);\n  }\n};\n\nconst renderCommentsCount = (num, length) => {\n  socialCommentCountBlock.innerHTML = `${num} из <span class=\"comments-count\">${length}</span> комментариев`;\n};\n\nconst openBigPicture = () => {\n  bigPic.classList.remove('hidden');\n  document.body.classList.add('modal-open')\n  document.addEventListener('keydown', onPopupEscKeydown);\n\n  // при открытии запускаем проверку на комменты, показываем разрешенное кол-во\n  showVisibleComments();\n  onLikesCountClickListener();\n};\n\nconst closeBigPicture = () => {\n  bigPic.classList.add('hidden');\n  document.body.classList.remove('modal-open');\n  document.removeEventListener('keydown', onPopupEscKeydown);\n  btnSocialCommentsLoader.removeEventListener('click', onBtnComment);\n  \n  // при закрытии большой картинки - снова приравниваем к 5 допустимое число видимых комментариев\n  visibleCommentsLength = DEFAULT_VISIBLE_COMMENTS;\n};\n\nconst onPopupEscKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    closeBigPicture();\n  }\n};\n\nconst showBigPicture = (minPicture) => {\n  bigPic.querySelector('.big-picture__img > img').src = minPicture.url;\n  bigPic.querySelector('.social__caption').textContent = minPicture.description;\n  bigPic.querySelector('.likes-count').textContent = minPicture.likes;\n  bigPic.querySelector('.comments-count').textContent = minPicture.comments.length;\n\n  openBigPicture();\n  onBtnCommetLoaderListener();\n  closeBigImg.addEventListener('click', () => {\n    closeBigPicture();\n  });\n};\n\n// допустимое число видимых комментариев\nlet visibleCommentsLength = DEFAULT_VISIBLE_COMMENTS;\n// проверяем кол-во комментариев, если их меньше 5 - кнопке \"загрузть еще\"добавялем класс Hidden\n// если их больше 5 - удаляем у кнопки класс hidden\n//  если больше 5 - находим все комментарии с индексом равному или больше числу visibleCommentsLength и добавляем их класс hidden\nconst showVisibleComments = () => {\n  const comments = document.querySelectorAll('.social__comment');\n  if (comments.length > DEFAULT_VISIBLE_COMMENTS) {\n    btnSocialCommentsLoader.classList.remove('hidden');\n    renderCommentsCount(visibleCommentsLength, comments.length);\n    for (let index = 0; index < comments.length; index++) {\n      const element = comments[index];\n      if (index >= visibleCommentsLength) {\n        element.classList.add('hidden');\n\n      }\n      else {\n        element.classList.remove('hidden');\n      }\n    }\n  }\n  if (comments.length <= visibleCommentsLength) {\n    renderCommentsCount(comments.length, comments.length);\n    btnSocialCommentsLoader.classList.add('hidden');\n  }\n};\n\nconst onBtnComment = (evt) => {\n  evt.preventDefault();\n  // на каждый клик по кнопке \"показать еще\" прибавялем значение видимых комментариев на 5\n  visibleCommentsLength = visibleCommentsLength + 5;\n  // и запускаем проверку чтобы отобразить\n  showVisibleComments();\n};\n\nconst onBtnCommetLoaderListener = () => {\n  btnSocialCommentsLoader.addEventListener('click', onBtnComment)\n};\nexport { showBigPicture, renderCommets };\n","import { showBigPicture, renderCommets } from './big-picture.js';\n\nconst createPicturesElemts = (pictures) => {\n  // родитель в который надо вставить сгенирированыне элементы\n  const picturesElementsList = document.querySelector('.pictures');\n  // html шаблон который будем копировать\n  const pictureElementTemplate = document.querySelector('#picture').content.querySelector('.picture');\n  const similiarPicturesFragment = document.createDocumentFragment();\n\n  pictures.forEach((picture) => {\n    // копируем шаблон со всем его содержимым true в новую переменную\n    const pictureElemet = pictureElementTemplate.cloneNode(true);\n\n    pictureElemet.querySelector('.picture__img').src = picture.url;\n    pictureElemet.querySelector('.picture__likes').textContent = picture.likes;\n    pictureElemet.querySelector('.picture__comments').textContent = picture.comments.length;\n    pictureElemet.querySelector('.picture__img').alt = picture.description;\n    // добавляем каждый элемент в созданный DocumentFragment\n    similiarPicturesFragment.appendChild(pictureElemet);\n\n    pictureElemet.addEventListener('click', (evt) => {\n      evt.preventDefault();\n      renderCommets(picture);\n      showBigPicture(picture);\n    })\n  })\n  // добваляем в родитель фрагмент с готовыми картинками\n  picturesElementsList.appendChild(similiarPicturesFragment);\n};\n\nexport { createPicturesElemts };\n","const uploadImg = document.querySelector('.img-upload__preview > img');\r\n\r\nconst setImgTransformeStyle = (img, value) => {\r\n  img.style.transform = `scale(${value})`;\r\n};\r\n\r\nconst getInputValue = (input, newValue, img) => {\r\n  const arrayInValue = input.value.split('%');\r\n  const numInValue = arrayInValue[0];\r\n  let newNum = numInValue;\r\n  let newArrayValue = [];\r\n  newNum = +numInValue + newValue;\r\n  newArrayValue.push(newNum + '%');\r\n  input.value = newArrayValue;\r\n  setImgTransformeStyle(img, newNum / 100);\r\n};\r\n\r\nconst onbuttonSetScaleValue = (button, button2, input, btnValue, btnOffValue, img) => {\r\n  button.addEventListener('click', () => {\r\n    button2.removeAttribute('disabled', 'disabled');\r\n    if (input.value == Math.abs(btnOffValue) + '%') {\r\n      button.setAttribute('disabled', 'disabled');\r\n    } else {\r\n      button.removeAttribute('disabled', 'disabled');\r\n      getInputValue(input, btnValue, img);\r\n    }\r\n  });\r\n};\r\n\r\nconst resetScaleImage = () => {\r\n  uploadImg.style.transform = '';\r\n};\r\n\r\nexport { onbuttonSetScaleValue, resetScaleImage };\r\n","/* global noUiSlider:readonly */\r\nconst sliderFilter = document.querySelector('.effect-level__slider');\r\nconst uploadImg = document.querySelector('.img-upload__preview > img');\r\nconst filterControlsInput = document.querySelectorAll('.effects__radio');\r\nconst effectLevel = document.querySelector('.effect-level__value');\r\n\r\nconst resetEffectImage = () => {\r\n  effectLevel.value = '';\r\n  uploadImg.style.filter = 'none';\r\n};\r\n\r\nconst initSlider = (sliderElement) => {\r\n  const sliderBase = document.querySelector('.noUi-base');\r\n  // чтобы не было реинициализации - иначе ошибка, проверям есть ли слайдер?\r\n  if (!sliderBase) {\r\n    noUiSlider.create(sliderElement, {\r\n      range: {\r\n        min: 0,\r\n        max: 100,\r\n      },\r\n      start: 50,\r\n      format: {\r\n        to: function (value) {\r\n          if (Number.isInteger(value)) {\r\n            return value.toFixed(0);\r\n          }\r\n          return value.toFixed(1);\r\n        },\r\n        from: function (value) {\r\n          return parseFloat(value);\r\n        },\r\n      },\r\n    });\r\n  }\r\n  sliderElement.classList.add('hidden')\r\n};\r\n\r\nconst changeFilterImageValue = (sliderElement, img) => {\r\n  sliderElement.noUiSlider.on('update', (_, handle, unencoded) => {\r\n    // при отправке формы или сбросе - не забыть сккинуть и значение effect.value\r\n    effectLevel.value = unencoded[handle];\r\n    if (img.classList.contains('effects__preview--chrome')) {\r\n      img.style.filter = `grayscale(${unencoded[handle]})`;\r\n    }\r\n    if (img.classList.contains('effects__preview--sepia')) {\r\n      img.style.filter = `sepia(${unencoded[handle]})`;\r\n    }\r\n    if (img.classList.contains('effects__preview--marvin')) {\r\n      img.style.filter = `invert(${unencoded[handle]}%)`;\r\n    }\r\n    if (img.classList.contains('effects__preview--phobos')) {\r\n      img.style.filter = `blur(${unencoded[handle]}px)`;\r\n    }\r\n    if (img.classList.contains('effects__preview--heat')) {\r\n      img.style.filter = `brightness(${unencoded[handle]})`;\r\n    }\r\n  });\r\n};\r\n\r\nconst changeSliderOption = (sliderElement, array, img) => {\r\n  for (let index = 0; index < array.length; index++) {\r\n    const element = array[index];\r\n\r\n    element.addEventListener('click', (evt) => {\r\n      if (evt.target.value == 'none') {\r\n        img.style.filter = '';\r\n        sliderElement.classList.add('hidden')\r\n      }\r\n\r\n      if (evt.target.value == 'chrome' || evt.target.value == 'sepia') {\r\n        sliderElement.classList.remove('hidden')\r\n        sliderElement.noUiSlider.updateOptions({\r\n          range: {\r\n            min: 0,\r\n            max: 1,\r\n          },\r\n          start: 1,\r\n          step: 0.1,\r\n        });\r\n      }\r\n      if (evt.target.value == 'marvin') {\r\n        sliderElement.classList.remove('hidden')\r\n        sliderElement.noUiSlider.updateOptions({\r\n          range: {\r\n            min: 0,\r\n            max: 100,\r\n          },\r\n          start: 100,\r\n          step: 1,\r\n        });\r\n      }\r\n      if (evt.target.value == 'phobos' || evt.target.value == 'heat') {\r\n        sliderElement.classList.remove('hidden')\r\n        sliderElement.noUiSlider.updateOptions({\r\n          range: {\r\n            min: 0,\r\n            max: 3,\r\n          },\r\n          start: 3,\r\n          step: 0.1,\r\n        });\r\n      }\r\n      if (evt.target.value == 'heat') {\r\n        sliderElement.classList.remove('hidden')\r\n        sliderElement.noUiSlider.updateOptions({\r\n          range: {\r\n            min: 1,\r\n            max: 3,\r\n          },\r\n          start: 3,\r\n          step: 0.1,\r\n        });\r\n      }\r\n    })\r\n  }\r\n};\r\n\r\nconst setSliderImgFilter = () => {\r\n  initSlider(sliderFilter);\r\n  changeFilterImageValue(sliderFilter, uploadImg);\r\n  changeSliderOption(sliderFilter, filterControlsInput, uploadImg);\r\n};\r\n\r\nexport { setSliderImgFilter, resetEffectImage };\r\n","import { isEscEvent } from './util.js';\r\nimport { sendData } from './get-send-data.js';\r\nimport { resetEffectImage } from './slider-img-filter.js';\r\nimport { resetScaleImage } from './scale-upload-img.js';\r\nimport { closeUploadModal } from './user-modal.js';\r\n\r\nconst uploadForm = document.querySelector('#upload-select-image');\r\n\r\nconst errorMessageTemplate = document.querySelector('#error').content.querySelector('.error');\r\nconst mainContentWrap = document.querySelector('main');\r\n\r\nconst resetFormsData = () => {\r\n  uploadForm.reset();\r\n  resetEffectImage();\r\n  resetScaleImage();\r\n  closeUploadModal();\r\n};\r\n\r\nconst onEscKeydownCloseError = (evt) => {\r\n  if (isEscEvent(evt)) {\r\n    evt.preventDefault();\r\n    closePopupError();\r\n  }\r\n};\r\n\r\nconst closePopupError = () => {\r\n  document.querySelector('.error').remove();\r\n  document.removeEventListener('keydown', onEscKeydownCloseError);\r\n  document.removeEventListener('click', onClickCloseError);\r\n};\r\n\r\nconst onClickCloseError = (evt) => {\r\n  if (evt.target.closest('.error__inner') === null) {\r\n    closePopupError();\r\n  }\r\n};\r\n\r\nconst onBtnCloseError = (evt) => {\r\n  closePopupError();\r\n  evt.target.removeEventListener('click', onBtnCloseError);\r\n};\r\n\r\nconst showErrorPopupMessage = () => {\r\n  const messageElement = errorMessageTemplate.cloneNode(true);\r\n  mainContentWrap.append(messageElement);\r\n  const closeErrPopupBtn = document.querySelector('.error__button');\r\n  closeErrPopupBtn.addEventListener('click', onBtnCloseError);\r\n  document.addEventListener('keydown', onEscKeydownCloseError);\r\n  document.addEventListener('click', onClickCloseError);\r\n};\r\n\r\nconst onFailSubmit = () => {\r\n  resetFormsData();\r\n  showErrorPopupMessage();\r\n};\r\n\r\n//////// показ и скрытие сообщени при усешной отправки формы\r\nconst successMessageTemplate = document.querySelector('#success').content.querySelector('.success');\r\n\r\nconst closeSuccessPopup = () => {\r\n  document.querySelector('.success').remove();\r\n  document.removeEventListener('keydown', onEscKeydownCloseSuccess);\r\n  document.removeEventListener('click', onClickCloseSuccess);\r\n};\r\n\r\nconst onClickCloseSuccess = (evt) => {\r\n  if (evt.target.closest('.success__inner') === null) {\r\n    closeSuccessPopup();\r\n  }\r\n};\r\n\r\nconst onEscKeydownCloseSuccess = (evt) => {\r\n  if (isEscEvent(evt)) {\r\n    evt.preventDefault();\r\n    closeSuccessPopup();\r\n  }\r\n};\r\n\r\nconst onBtnCloseSuccess = (evt) => {\r\n  closeSuccessPopup();\r\n  evt.target.removeEventListener('click', onBtnCloseSuccess);\r\n};\r\n\r\nconst showSuccessPopupMessage = () => {\r\n  const messageElement = successMessageTemplate.cloneNode(true);\r\n  mainContentWrap.append(messageElement);\r\n  const closeSuccessPopupBtn = document.querySelector('.success__button');\r\n  closeSuccessPopupBtn.addEventListener('click', onBtnCloseSuccess);\r\n  document.addEventListener('keydown', onEscKeydownCloseSuccess);\r\n  document.addEventListener('click', onClickCloseSuccess);\r\n};\r\n\r\n///////// отправка формы нового объяаления\r\nconst onSuccessSubmit = () => {\r\n  resetFormsData();\r\n  showSuccessPopupMessage();\r\n};\r\n\r\nconst onSubmitSendData = (sendURL) => {\r\n  uploadForm.addEventListener('submit', (evt) => {\r\n    evt.preventDefault();\r\n    sendData(sendURL, new FormData(evt.target), onSuccessSubmit, onFailSubmit)\r\n  });\r\n};\r\n\r\nexport { onSubmitSendData, showErrorPopupMessage, showSuccessPopupMessage, resetFormsData }\r\n","import { isEscEvent } from './util.js';\r\nimport { onbuttonSetScaleValue } from './scale-upload-img.js';\r\nimport { setSliderImgFilter } from './slider-img-filter.js';\r\nimport { resetFormsData } from './form.js';\r\n\r\nconst FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\r\n\r\nconst defaultImg = 'img/upload-default-image.jpg';\r\n\r\nconst scaleValueInput = document.querySelector('.scale__control--value');\r\nconst scaleButtonBigger = document.querySelector('.scale__control--bigger');\r\nconst scaleButtonSmaller = document.querySelector('.scale__control--smaller');\r\n\r\nconst uploadInput = document.querySelector('#upload-file');\r\nconst uploadOverlay = document.querySelector('.img-upload__overlay');\r\nconst body = document.body;\r\nconst closeCancelButton = document.querySelector('#upload-cancel');\r\n\r\nconst uploadImg = document.querySelector('.img-upload__preview > img');\r\nconst filterControlsInput = document.querySelectorAll('.effects__radio');\r\n\r\nconst setDefaultImgSrc = () => {\r\n  uploadImg.src = defaultImg;\r\n};\r\n\r\nconst changeFilterImg = (array, img) => {\r\n  for (let index = 0; index < array.length; index++) {\r\n    const element = array[index];\r\n    element.addEventListener('click', () => {\r\n      if (element.checked == true) {\r\n        img.classList = '';\r\n        img.style.filter = '';\r\n        img.classList.add(`effects__preview--${element.value}`)\r\n      }\r\n    })\r\n  }\r\n};\r\n\r\nconst onModalEscKeydown = (evt) => {\r\n  if (isEscEvent(evt)) {\r\n    evt.preventDefault();\r\n    closeUploadModal();\r\n  }\r\n};\r\n\r\nconst closeUploadModal = () => {\r\n  uploadOverlay.classList.add('hidden');\r\n  body.classList.remove('modal-open');\r\n  document.removeEventListener('keydown', onModalEscKeydown);\r\n  uploadInput.value = '';\r\n  uploadImg.classList = '';\r\n  setDefaultImgSrc();\r\n};\r\n\r\nconst openUploadModal = () => {\r\n  uploadOverlay.classList.remove('hidden');\r\n  body.classList.add('modal-open');\r\n  document.addEventListener('keydown', onModalEscKeydown);\r\n};\r\n\r\nconst onUploadShowModal = () => {\r\n  uploadInput.addEventListener('change', () => {\r\n    openUploadModal();\r\n    setSliderImgFilter();\r\n  });\r\n\r\n  onbuttonSetScaleValue(scaleButtonBigger, scaleButtonSmaller, scaleValueInput, +25, 100, uploadImg);\r\n  onbuttonSetScaleValue(scaleButtonSmaller, scaleButtonBigger, scaleValueInput, -25, 25, uploadImg);\r\n\r\n  changeFilterImg(filterControlsInput, uploadImg);\r\n\r\n  closeCancelButton.addEventListener('click', () => {\r\n    closeUploadModal();\r\n    resetFormsData();\r\n  })\r\n};\r\n\r\nconst renderUploadImg = () => {\r\n  uploadInput.addEventListener('change', () => {\r\n    const file = uploadInput.files[0];\r\n    const fileName = file.name.toLowerCase();\r\n\r\n    const matches = FILE_TYPES.some((it) => {\r\n      return fileName.endsWith(it);\r\n    });\r\n\r\n    if (matches) {\r\n      const reader = new FileReader();\r\n\r\n      reader.addEventListener('load', () => {\r\n        uploadImg.src = reader.result;\r\n      });\r\n\r\n      reader.readAsDataURL(file);\r\n    }\r\n  });\r\n};\r\n\r\nexport { onUploadShowModal, closeUploadModal, renderUploadImg };\r\n","import { isEscEvent } from './util.js';\r\n\r\nconst COMMENT_MAX_LENGTH = 140;\r\n\r\nconst uploadOverlay = document.querySelector('.img-upload__overlay');\r\nconst inputTags = uploadOverlay.querySelector('.text__hashtags');\r\nconst commentInput = uploadOverlay.querySelector('.text__description');\r\n\r\n// валидный тег - это тот что начинается с решетки и дальше содержит от 1 до 19\r\n// любого алфавитно-цифрового символа из базового латинского алфавита [A-Za-z0-9_]\r\nconst checkValidityTag = (tag) => {\r\n  // https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/RegExp\r\n  // создадим регульярное выражение\r\n  const regexp = /^#\\w{1,19}$/;\r\n  // проверяем тег на совадение нашему проварилу минимум два символа решетка и еще буква или цифра\r\n  // если метод match не нешал совпадение то значение\r\n  // matchIt будет присвоено null и в этом случаем получим matchIt !== null вернет false, проверка не пройдена\r\n  // https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/match\r\n  const matchIt = tag.match(regexp);\r\n  // -------- возвращаем результут проверки соответсвия правилу\r\n  return matchIt !== null;\r\n};\r\n// чтобы получить отдельный тег из инпута надо разобрать введеный текст\r\nconst runValidateTags = (string) => {\r\n  // trim удаляет пустые пробелы и длина введеного в инпут будет равно 0 - значит ошибка\r\n  // защита от введения пустоты))\r\n  if (string.trim().length === 0) {\r\n    inputTags.setCustomValidity('введите текст');\r\n    return false;\r\n  }\r\n  // далее разбиваем введеный текст на отдельные слова, получаем массив тегов и проверяем чтобы его длинна\r\n  // была не равна 0, значит хотя бы 1 тег-слово есть\r\n  const tags = string.toLowerCase().split(' ').filter((tag) => tag.length !== 0);\r\n  // Метод доступа size возвращает количество (уникальных) элементов в объекте Set\r\n  // т.е если введны все уникальне теги то длина оригинального массива и кол-во уникальных тегов полученных new Set(tags).size\r\n  // будут равны, тогда код будет выполняться дальше\r\n  // если ввели одниковые теги будет ошибка\r\n  if (tags.length !== new Set(tags).size) {\r\n    inputTags.setCustomValidity('Хэштеги должны быть уникальны');\r\n    return false;\r\n  }\r\n  // если длина массива с тегами больше 5 - ошибка\r\n  if (tags.length > 5) {\r\n    inputTags.setCustomValidity('Количество хэштегов не должно превышать 5');\r\n    return false;\r\n  }\r\n  // проходим по каждому тегу\r\n  for (let i = 0; i < tags.length; i++) {\r\n    const tag = tags[i];\r\n    // проверка начала каждого тега, если не решетка - ошибка\r\n    // хотя у нас уже проверяется решетка регулярным варажением\r\n    // но чтобы выводить сообщение об конкретной ошибке добавим еще эту проверку\r\n    if (!tag.startsWith('#')) {\r\n      inputTags.setCustomValidity('Хэштег должен начинаться с символа #');\r\n      return false;\r\n    }\r\n    // проверяем тег по нашему регулярному выражению\r\n    if (!checkValidityTag(tag)) {\r\n      inputTags.setCustomValidity('Хэштег может состоять только из букв и чисел');\r\n      return false;\r\n    }\r\n  }\r\n  // если всё тру ошибка сбрасывается\r\n  inputTags.style.boxShadow = '';\r\n  inputTags.setCustomValidity('');\r\n  return true;\r\n};\r\n\r\nconst onInputTagValidateListener = () => {\r\n  // как только мы в инпуте, вешает обработчик ECS\r\n  inputTags.addEventListener('keydown', onEcsKeyDown);\r\n\r\n  inputTags.addEventListener('input', () => {\r\n    const inputText = inputTags.value;\r\n    // если проверка возвращает false - выводится ошибка\r\n    if (runValidateTags(inputText) === false) {\r\n      inputTags.style.boxShadow = 'inset 0 0 3px 1px red';\r\n      inputTags.reportValidity();\r\n    }\r\n  });\r\n};\r\n\r\nconst onInputCommentValidateListener = () => {\r\n  commentInput.addEventListener('keydown', onEcsKeyDown);\r\n  commentInput.addEventListener('input', () => {\r\n    if (commentInput.value.length > COMMENT_MAX_LENGTH) {\r\n      commentInput.setCustomValidity('Комментарий не должен превышать 140 символов; Удалите лишние ' + (commentInput.value.length - COMMENT_MAX_LENGTH) + ' симв.')\r\n      commentInput.style.boxShadow = 'inset 0 0 5px 3px red';\r\n    } else {\r\n      commentInput.setCustomValidity('');\r\n      commentInput.style.boxShadow = '';\r\n    }\r\n    commentInput.reportValidity();\r\n  });\r\n};\r\n\r\nconst onEcsKeyDown = (evt) => {\r\n  if (isEscEvent(evt)) {\r\n    evt.preventDefault();\r\n    // прекращает слушать нажатую кнопку\r\n    // т.е модальное окно по клику на ECS не закроется\r\n    evt.stopPropagation();\r\n  }\r\n};\r\n\r\nexport { onInputTagValidateListener, onInputCommentValidateListener };\r\n\r\n","/* global _:readonly */\r\nimport { createPicturesElemts } from './create-pictures-elemtns.js';\r\nimport { getRandomUniqElemets } from './util.js';\r\n\r\nconst RANDOM_COUNT = 10;\r\nconst RERENDER_DELAY = 500;\r\n\r\nconst imgFilter = document.querySelector('.img-filters');\r\nconst imgFilterBtnDefault = document.querySelector('#filter-default');\r\nconst imgFilterBtnRandom = document.querySelector('#filter-random');\r\nconst imgFilterBtnDiscussed = document.querySelector('#filter-discussed');\r\n\r\nconst showImgFilter = () => {\r\n  if (imgFilter) {\r\n    if (imgFilter.classList.contains('img-filters--inactive')) {\r\n      imgFilter.classList.remove('img-filters--inactive');\r\n    }\r\n  }\r\n};\r\n\r\nconst delPictures = () => {\r\n  document.querySelectorAll('.picture').forEach(picture => {\r\n    picture.remove();\r\n  });\r\n};\r\n// «Обсуждаемые» — фотографии, отсортированные в порядке убывания количества комментариев.\r\nconst sortImagesByComments = (data) => {\r\n  const sortedData = data.sort(function (a, b) {\r\n    const commentsA = a.comments.length;\r\n    const commentsB = b.comments.length;\r\n    if (commentsB > commentsA) {\r\n      return 1;\r\n    }\r\n    if (commentsB < commentsA) {\r\n      return -1;\r\n    }\r\n    return 0;\r\n  });\r\n  return sortedData;\r\n};\r\n\r\nconst getMostCommentedImges = (data) => {\r\n  imgFilterBtnDiscussed.addEventListener('click', _.debounce(\r\n    (() => {\r\n      delPictures();\r\n      createPicturesElemts(sortImagesByComments(data));\r\n    }\r\n    ), RERENDER_DELAY,\r\n  ));\r\n};\r\n\r\nconst sortImagesById = (data) => {\r\n  const sortedData = data.sort(function (a, b) {\r\n    if (a.id > b.id) {\r\n      return 1;\r\n    }\r\n    if (a.id < b.id) {\r\n      return -1;\r\n    }\r\n    return 0;\r\n  });\r\n  return sortedData;\r\n};\r\n\r\nconst getDefaultImages = (data) => {\r\n  imgFilterBtnDefault.addEventListener('click', _.debounce(\r\n    (() => {\r\n      delPictures();\r\n      createPicturesElemts(sortImagesById(data));\r\n    }), RERENDER_DELAY,\r\n  ));\r\n};\r\n\r\nconst getRandomImages = (data) => {\r\n  imgFilterBtnRandom.addEventListener('click', _.debounce(\r\n    (() => {\r\n      delPictures();\r\n      createPicturesElemts(getRandomUniqElemets(data, RANDOM_COUNT));\r\n    }), RERENDER_DELAY,\r\n  ));\r\n};\r\n\r\nconst renderFilteredImages = (data) => {\r\n  getDefaultImages(data);\r\n  getRandomImages(data);\r\n  getMostCommentedImges(data);\r\n};\r\n\r\nexport { showImgFilter, renderFilteredImages };\r\n","// надо делать лайки и счетчик +/- лайк\nimport { createPicturesElemts } from './create-pictures-elemtns.js';\nimport { onUploadShowModal, renderUploadImg } from './user-modal.js';\nimport { onInputTagValidateListener, onInputCommentValidateListener } from './tags-comment-validate.js';\nimport { getData } from './get-send-data.js';\nimport { showAlert } from './util.js';\nimport { onSubmitSendData } from './form.js';\n\nimport { showImgFilter, renderFilteredImages } from './img-filter.js';\n\nconst getUrl = 'https://22.javascript.pages.academy/kekstagram/data';\nconst sendUrl = 'https://22.javascript.pages.academy/kekstagram';\n\nconst getDataSuccess = (data) => {\n  createPicturesElemts(data);\n  showImgFilter();\n  renderFilteredImages(data);\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  getData(getUrl, getDataSuccess, showAlert);\n  renderUploadImg();\n  onUploadShowModal();\n  onInputTagValidateListener();\n  onInputCommentValidateListener();\n  onSubmitSendData(sendUrl);\n});\n","const getData = (getUrl, onSuccess, onFail) => {\n  return fetch(getUrl,\n    {\n      method: 'GET',\n      credentials: 'same-origin',\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error(`${response.status} ${response.statusText}`);\n    })\n    .then((data) => {\n      onSuccess(data);\n    })\n    .catch((err) => {\n      onFail(err);\n    });\n};\n\nconst sendData = (sendUrl, body, onSuccess, onFail) => {\n  return fetch(sendUrl,\n    {\n      method: 'POST',\n      body,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        onSuccess();\n      } else {\n        onFail();\n      }\n    })\n    .catch((err) => {\n      onFail(err);\n    });\n};\n\nexport { getData, sendData };\n"],"sourceRoot":""}