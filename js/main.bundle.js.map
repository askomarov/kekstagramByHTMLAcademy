{"version":3,"sources":["webpack://kekstagram/./source/js/util.js","webpack://kekstagram/./source/js/big-picture.js","webpack://kekstagram/./source/js/create-pictures-elemtns.js","webpack://kekstagram/./source/js/scale-upload-img.js","webpack://kekstagram/./source/js/slider-img-filter.js","webpack://kekstagram/./source/js/form.js","webpack://kekstagram/./source/js/user-modal.js","webpack://kekstagram/./source/js/tags-comment-validate.js","webpack://kekstagram/./source/js/img-filter.js","webpack://kekstagram/./source/js/main.js","webpack://kekstagram/./source/js/get-send-data.js"],"names":["isEscEvent","evt","key","showAlert","message","alertContainer","document","createElement","style","zIndex","position","left","top","width","height","transform","padding","fontSize","textAlign","backgroundColor","textContent","body","append","setTimeout","remove","bigPic","querySelector","closeBigImg","socialCommentCountBlock","btnSocialCommentsLoader","bigPicCommentsList","onLikesCountClick","target","classList","contains","Number","add","commentsFragments","DocumentFragment","renderCommentsCount","num","length","innerHTML","closeBigPicture","removeEventListener","onEscClosePreview","onBtnCommentShowMore","visibleCommentsLength","preventDefault","showVisibleComments","comments","querySelectorAll","forEach","comment","index","createPicturesElemts","pictures","picturesElementsList","pictureElementTemplate","content","similiarPicturesFragment","createDocumentFragment","picture","pictureElemet","cloneNode","src","url","likes","alt","description","appendChild","addEventListener","minPicture","item","commentElement","avatar","name","createCommentElemnt","uploadImg","onbuttonSetScaleValue","button","button2","input","btnValue","btnOffValue","img","removeAttribute","value","Math","abs","setAttribute","newValue","numInValue","split","newNum","newArrayValue","push","setImgTransformeStyle","getInputValue","CHROME_SEPIA_OPTIONS","range","min","max","start","step","MARVIN_OPTIONS","PHOBOS_OPTIONS","HEAT_OPTIONS","sliderWrapper","sliderFilter","filterControlsWrapper","effectLevel","onRadioEffectBtnClick","filter","noUiSlider","updateOptions","setSliderImgFilter","sliderElement","create","format","to","isInteger","toFixed","from","parseFloat","createSlider","on","_","handle","unencoded","uploadForm","errorMessageTemplate","mainContentWrap","resetFormsData","reset","onErrorPopupCloseKeydown","closePopupError","onErrorPopupCloseClickAway","closest","onErrorPopupCloseClick","onFailSubmit","closeUploadModal","messageElement","showErrorPopupMessage","successMessageTemplate","closeSuccessPopup","onSuccessPopupCloseKeydown","onSuccessPopupCloseClickAway","onSuccessPopupCloseClick","onSuccessSubmit","showSuccessPopupMessage","FILE_TYPES","defaultImg","scaleValueInput","scaleButtonBigger","scaleButtonSmaller","uploadInput","uploadOverlay","closeCancelButton","filterControlInputs","effectsPreview","onModalClose","element","backgroundImage","REG_EXP","inputTags","commentInput","stopPropagationKeyEsc","stopPropagation","imgFilter","filterForm","filterBtns","getDataSuccess","data","btn","showImgFilter","debounce","id","sort","a","b","sortImagesById","getDefaultImages","RANDOM_COUNT","randomUniqData","round","random","includes","getRandomUniqElemets","getRandomImages","commentsA","commentsB","sortImagesByComments","getMostCommentedImges","onFilterBtnClick","sortingImages","onSuccess","onFail","sendURL","fetch","method","credentials","then","response","ok","json","Error","status","statusText","catch","err","file","files","fileName","toLowerCase","some","it","endsWith","reader","FileReader","result","readAsDataURL","renderUploadImg","checked","string","trim","setCustomValidity","tags","tag","Set","size","every","startsWith","match","checkValidityTag","boxShadow","runValidateTags","reportValidity","sendUrl","sendData","FormData"],"mappings":"mBAAA,MA0BMA,EAAcC,GACE,WAAbA,EAAIC,IAGPC,EAAaC,IACjB,MAAMC,EAAiBC,SAASC,cAAc,OAC9CF,EAAeG,MAAMC,OAAS,IAC9BJ,EAAeG,MAAME,SAAW,WAChCL,EAAeG,MAAMG,KAAO,MAC5BN,EAAeG,MAAMI,IAAM,MAC3BP,EAAeG,MAAMK,MAAQ,QAC7BR,EAAeG,MAAMM,OAAS,OAC9BT,EAAeG,MAAMO,UAAY,wBACjCV,EAAeG,MAAMQ,QAAU,WAC/BX,EAAeG,MAAMS,SAAW,OAChCZ,EAAeG,MAAMU,UAAY,SACjCb,EAAeG,MAAMW,gBAAkB,SAEvCd,EAAee,YAAchB,EAE7BE,SAASe,KAAKC,OAAOjB,GAErBkB,YAAW,KACTlB,EAAemB,WAjDM,MCInBC,EAASnB,SAASoB,cAAc,gBAChCC,EAAcF,EAAOC,cAAc,wBACnCE,EAA0BH,EAAOC,cAAc,0BAC/CG,EAA0BJ,EAAOC,cAAc,4BAC/CI,EAAqBL,EAAOC,cAAc,qBAE1CK,EAAqB9B,GACrBA,EAAI+B,OAAOC,UAAUC,SAAS,wBAChCjC,EAAI+B,OAAOZ,YAAce,OAAOlC,EAAI+B,OAAOZ,aAAe,OAC1DnB,EAAI+B,OAAOC,UAAUT,OAAO,yBAG5BvB,EAAI+B,OAAOZ,YAAce,OAAOlC,EAAI+B,OAAOZ,aAAe,OAC1DnB,EAAI+B,OAAOC,UAAUG,IAAI,wBAWvBC,EAAoB,IAAIC,iBAuBxBC,EAAsB,CAACC,EAAKC,KAChCb,EAAwBc,UAAY,GAAGF,qCAAuCC,yBAa1EE,EAAkB,KACtBlB,EAAOQ,UAAUG,IAAI,UACrB9B,SAASe,KAAKY,UAAUT,OAAO,cAC/BlB,SAASsC,oBAAoB,UAAWC,GACxChB,EAAwBe,oBAAoB,QAASE,GAGrDC,EAtE+B,GAyE3BF,EAAqB5C,IACrBD,EAAWC,KACbA,EAAI+C,iBACJL,MAkBJ,IAAII,EA9F6B,EAkGjC,MAAME,EAAsB,KAC1B,MAAMC,EAAW5C,SAAS6C,iBAAiB,oBACvCD,EAAST,OApGkB,IAqG7BZ,EAAwBI,UAAUT,OAAO,UACzCe,EAAoBQ,EAAuBG,EAAST,QACpDS,EAASE,SAAQ,CAACC,EAASC,KACrBA,GAASP,EACXM,EAAQpB,UAAUG,IAAI,UAGtBiB,EAAQpB,UAAUT,OAAO,cAI3B0B,EAAST,QAAUM,IACrBR,EAAoBW,EAAST,OAAQS,EAAST,QAC9CZ,EAAwBI,UAAUG,IAAI,YAIpCU,EAAwB7C,IAC5BA,EAAI+C,iBAEJD,GAzH+B,EA2H/BE,KC3HIM,EAAwBC,IAE5B,MAAMC,EAAuBnD,SAASoB,cAAc,aAE9CgC,EAAyBpD,SAASoB,cAAc,YAAYiC,QAAQjC,cAAc,YAClFkC,EAA2BtD,SAASuD,yBAE1CL,EAASJ,SAASU,IAEhB,MAAMC,EAAgBL,EAAuBM,WAAU,GAEvDD,EAAcrC,cAAc,iBAAiBuC,IAAMH,EAAQI,IAC3DH,EAAcrC,cAAc,mBAAmBN,YAAc0C,EAAQK,MACrEJ,EAAcrC,cAAc,sBAAsBN,YAAc0C,EAAQZ,SAAST,OACjFsB,EAAcrC,cAAc,iBAAiB0C,IAAMN,EAAQO,YAE3DT,EAAyBU,YAAYP,GAErCA,EAAcQ,iBAAiB,SAAUtE,ID8DtB,IAACuE,EC7DlBvE,EAAI+C,iBACUc,EDqBIZ,SACbE,SAAQC,IACfvB,EAAmBY,UAAY,GAfP,CAAC+B,IAC3B,MAAMC,EAAiBpE,SAASC,cAAc,MAC9CmE,EAAezC,UAAUG,IAAI,mBAC7BsC,EAAehC,UAAY,mDAEhB+B,EAAKE,uBACLF,EAAKG,mEAEUH,EAAKrE,cAC/BiC,EAAkBiC,YAAYI,IAO5BG,CAAoBxB,MAEtBvB,EAAmBwC,YAAYjC,GAkCTmC,EC3DHV,ED4DnBrC,EAAOC,cAAc,2BAA2BuC,IAAMO,EAAWN,IACjEzC,EAAOC,cAAc,oBAAoBN,YAAcoD,EAAWH,YAClE5C,EAAOC,cAAc,gBAAgBN,YAAcoD,EAAWL,MAC9D1C,EAAOC,cAAc,mBAAmBN,YAAcoD,EAAWtB,SAAST,OA9B1EhB,EAAOQ,UAAUT,OAAO,UACxBlB,SAASe,KAAKY,UAAUG,IAAI,cAC5B9B,SAASiE,iBAAiB,UAAW1B,GAGrCI,IAtCmB3C,SAASoB,cAAc,gBAC/B6C,iBAAiB,QAASxC,GAyGrCF,EAAwB0C,iBAAiB,QAASzB,GAvClDnB,EAAY4C,iBAAiB,SAAS,KACpC5B,aChEFc,EAAqBa,YAAYV,IC3B7BkB,EAAYxE,SAASoB,cAAc,8BAiBnCqD,EAAwB,CAACC,EAAQC,EAASC,EAAOC,EAAUC,EAAaC,KAC5EL,EAAOT,iBAAiB,SAAS,KAC/BU,EAAQK,gBAAgB,WAAY,YAChCJ,EAAMK,QAAUC,KAAKC,IAAIL,GAAe,IAC1CJ,EAAOU,aAAa,WAAY,aAEhCV,EAAOM,gBAAgB,WAAY,YAjBnB,EAACJ,EAAOS,EAAUN,KACtC,MACMO,EADeV,EAAMK,MAAMM,MAAM,KACP,GAChC,IAAIC,EAASF,EACTG,EAAgB,GACpBD,GAAUF,EAAaD,EACvBI,EAAcC,KAAKF,EAAS,KAC5BZ,EAAMK,MAAQQ,EAXc,EAACV,EAAKE,KAClCF,EAAI7E,MAAMO,UAAY,SAASwE,MAW/BU,CAAsBZ,EAAKS,EAAS,MAUhCI,CAAchB,EAAOC,EAAUE,QCvB/Bc,EAAuB,CAC3BC,MAAO,CACLC,IAAK,EACLC,IAAK,GAEPC,MAAO,EACPC,KAAM,IAGFC,EAAiB,CACrBL,MAAO,CACLC,IAAK,EACLC,IAAK,KAEPC,MAAO,IACPC,KAAM,GAGFE,EAAiB,CACrBN,MAAO,CACLC,IAAK,EACLC,IAAK,GAEPC,MAAO,EACPC,KAAM,IAGFG,EAAe,CACnBP,MAAO,CACLC,IAAK,EACLC,IAAK,GAEPC,MAAO,EACPC,KAAM,IAGFI,EAAgBtG,SAASoB,cAAc,6BACvCmF,EAAevG,SAASoB,cAAc,yBACtC,EAAYpB,SAASoB,cAAc,8BACnCoF,EAAwBxG,SAASoB,cAAc,wBAC/CqF,EAAczG,SAASoB,cAAc,wBA2DrCsF,EAAyB/G,IACJ,SAArBA,EAAI+B,OAAOuD,QACb,EAAU/E,MAAMyG,OAAS,GACzBL,EAAc3E,UAAUG,IAAI,WAEL,WAArBnC,EAAI+B,OAAOuD,OAA2C,UAArBtF,EAAI+B,OAAOuD,QAC9CqB,EAAc3E,UAAUT,OAAO,UAC/BqF,EAAaK,WAAWC,cAAchB,IAEf,WAArBlG,EAAI+B,OAAOuD,QACbqB,EAAc3E,UAAUT,OAAO,UAC/BqF,EAAaK,WAAWC,cAAcV,IAEf,WAArBxG,EAAI+B,OAAOuD,QACbqB,EAAc3E,UAAUT,OAAO,UAC/BqF,EAAaK,WAAWC,cAAcT,IAEf,SAArBzG,EAAI+B,OAAOuD,QACbqB,EAAc3E,UAAUT,OAAO,UAC/BqF,EAAaK,WAAWC,cAAcR,KAYpCS,EAAqB,KArDI,IAAgB/B,EAT3BgC,IA+DPR,EA9DQvG,SAASoB,cAAc,eAtBvB,CAAC2F,IACpBH,WAAWI,OAAOD,EAAe,CAC/BjB,MAAO,CACLC,IAAK,EACLC,IAAK,KAEPC,MAAO,GACPgB,OAAQ,CACNC,GAAI,SAAUjC,GACZ,OAAIpD,OAAOsF,UAAUlC,GACZA,EAAMmC,QAAQ,GAEhBnC,EAAMmC,QAAQ,IAEvBC,KAAM,SAAUpC,GACd,OAAOqC,WAAWrC,QAUtBsC,CAAaR,GAEfT,EAAc3E,UAAUG,IAAI,UAGiBiD,EAuDR,EAAdwB,EAtDTK,WAAWY,GAAG,UAAU,CAACC,EAAGC,EAAQC,KAEhDlB,EAAYxB,MAAQ0C,EAAUD,GAC1B3C,EAAIpD,UAAUC,SAAS,8BACzBmD,EAAI7E,MAAMyG,OAAS,aAAagB,EAAUD,OAExC3C,EAAIpD,UAAUC,SAAS,6BACzBmD,EAAI7E,MAAMyG,OAAS,SAASgB,EAAUD,OAEpC3C,EAAIpD,UAAUC,SAAS,8BACzBmD,EAAI7E,MAAMyG,OAAS,UAAUgB,EAAUD,QAErC3C,EAAIpD,UAAUC,SAAS,8BACzBmD,EAAI7E,MAAMyG,OAAS,QAAQgB,EAAUD,SAEnC3C,EAAIpD,UAAUC,SAAS,4BACzBmD,EAAI7E,MAAMyG,OAAS,cAAcgB,EAAUD,UA6B/ClB,EAAsBvC,iBAAiB,QAASyC,ICtH5CkB,EAAa5H,SAASoB,cAAc,wBAEpCyG,EAAuB7H,SAASoB,cAAc,UAAUiC,QAAQjC,cAAc,UAC9E0G,EAAkB9H,SAASoB,cAAc,QAEzC2G,EAAiB,KACrBH,EAAWI,QDgCXvB,EAAYxB,MAAQ,GACpB,EAAU/E,MAAMyG,OAAS,ODfzBnC,EAAUtE,MAAMO,UAAY,IEbxBwH,EAA4BtI,IAC5BD,EAAWC,KACbA,EAAI+C,iBACJwF,MAIEA,EAAkB,KACtBlI,SAASoB,cAAc,UAAUF,SACjClB,SAASsC,oBAAoB,UAAW2F,GACxCjI,SAASsC,oBAAoB,QAAS6F,IAGlCA,EAA8BxI,IACU,OAAxCA,EAAI+B,OAAO0G,QAAQ,kBACrBF,KAIEG,EAA0B1I,IAC9BuI,IACAvI,EAAI+B,OAAOY,oBAAoB,QAAS+F,IAYpCC,EAAe,KACnBC,KACAR,IAX4B,MAC5B,MAAMS,EAAiBX,EAAqBnE,WAAU,GACtDoE,EAAgB9G,OAAOwH,GACExI,SAASoB,cAAc,kBAC/B6C,iBAAiB,QAASoE,GAC3CrI,SAASiE,iBAAiB,UAAWgE,GACrCjI,SAASiE,iBAAiB,QAASkE,IAMnCM,IAIIC,EAAyB1I,SAASoB,cAAc,YAAYiC,QAAQjC,cAAc,YAElFuH,EAAoB,KACxB3I,SAASoB,cAAc,YAAYF,SACnClB,SAASsC,oBAAoB,UAAWsG,GACxC5I,SAASsC,oBAAoB,QAASuG,IAGlCA,EAAgClJ,IACU,OAA1CA,EAAI+B,OAAO0G,QAAQ,oBACrBO,KAIEC,EAA8BjJ,IAC9BD,EAAWC,KACbA,EAAI+C,iBACJiG,MAIEG,EAA4BnJ,IAChCgJ,IACAhJ,EAAI+B,OAAOY,oBAAoB,QAASwG,IAapCC,EAAkB,KACtBR,KACAR,IAZ8B,MAC9B,MAAMS,EAAiBE,EAAuBhF,WAAU,GACxDoE,EAAgB9G,OAAOwH,GACMxI,SAASoB,cAAc,oBAC/B6C,iBAAiB,QAAS6E,GAC/C9I,SAASiE,iBAAiB,UAAW2E,GACrC5I,SAASiE,iBAAiB,QAAS4E,IAOnCG,ICxFIC,EAAa,CAAC,MAAO,MAAO,OAAQ,OAEpCC,EAAa,+BAEbC,EAAkBnJ,SAASoB,cAAc,0BACzCgI,EAAoBpJ,SAASoB,cAAc,2BAC3CiI,EAAqBrJ,SAASoB,cAAc,4BAE5CkI,EAActJ,SAASoB,cAAc,gBACrCmI,EAAgBvJ,SAASoB,cAAc,wBACvCL,EAAOf,SAASe,KAChByI,EAAoBxJ,SAASoB,cAAc,kBAE3C,GAAYpB,SAASoB,cAAc,8BACnCqI,GAAsBzJ,SAAS6C,iBAAiB,mBAChD6G,GAAiB1J,SAAS6C,iBAAiB,qBAsB3C8G,GAAgBhK,IAChBD,EAAWC,KACbA,EAAI+C,iBACJ6F,OAIEA,GAAmB,KACvBgB,EAAc5H,UAAUG,IAAI,UAC5Bf,EAAKY,UAAUT,OAAO,cACtBlB,SAASsC,oBAAoB,UAAWqH,IACxCL,EAAYrE,MAAQ,GACpB,GAAUtD,UAAY,GA9BtB,GAAUgC,IAAMuF,EAChBQ,GAAe5G,SAAQ8G,IACrBA,EAAQ1J,MAAM2J,gBAAkB,OAAOX,QA8BzCnB,IFqEAvB,EAAsBlE,oBAAoB,QAASoE,IGzH/CoD,GAAU,8BAEV,GAAgB9J,SAASoB,cAAc,wBACvC2I,GAAY,GAAc3I,cAAc,mBACxC4I,GAAe,GAAc5I,cAAc,sBAsF3C6I,GAAyBtK,IACzBD,EAAWC,KACbA,EAAI+C,iBAGJ/C,EAAIuK,oBC/FFC,GAAYnK,SAASoB,cAAc,gBACnCgJ,GAAaD,GAAU/I,cAAc,sBACrCiJ,GAAaD,GAAWvH,iBAAiB,wBCIzCyH,GAAkBC,IACtBtH,EAAqBsH,GDWD,MAEpB,GAfAH,GAAWnG,iBAAiB,SAAUtE,IACpC0K,GAAWvH,SAAS0H,IAClB,GAAI7K,EAAI+B,SAAW8I,GACjB,IAAK7K,EAAI+B,OAAOC,UAAUC,SAAS,gCACjC,OAAOjC,EAAI+B,OAAOC,UAAUG,IAAI,oCAGlC0I,EAAI7I,UAAUT,OAAO,qCAQvBiJ,IACEA,GAAUxI,UAAUC,SAAS,yBACxBuI,GAAUxI,UAAUT,OAAO,0BCdtCuJ,GDkFoB,CAACF,IACrBH,GAAWnG,iBAAiB,QAASwD,EAAEiD,UACnC/K,IAnBmB,EAAC4K,EAAM5K,KAE9B,GA/CAK,SAAS6C,iBAAiB,YAAYC,SAAQU,IAC5CA,EAAQtC,YA8CNvB,EAAI+B,OAAOC,UAAUC,SAAS,uBAChC,OAAQjC,EAAI+B,OAAOiJ,IACjB,IAAK,iBAZc,CAACJ,IACxBtH,EAdqB,CAACsH,GACHA,EAAKK,MAAK,CAACC,EAAGC,IAC3BD,EAAEF,GAAKG,EAAEH,GACJ,EAELE,EAAEF,GAAKG,EAAEH,IACH,EAEH,IAMYI,CAAeR,KAY9BS,CAAiBT,GACjB,MACF,IAAK,gBAXa,CAACA,IACvBtH,ER9D2B,EAACsH,EAAMU,KAClC,MAAMC,EAAiB,GACvB,KAAOA,EAAe/I,OQbH,IRa0B,CAC3C,MAAMyH,EAAUW,GAhBWvE,EAgBcuE,EAAKpI,OAAS,IAf1C6D,EAAM,KAGjBA,EAYoC,EAX/Bd,KAAKiG,MAAMjG,KAAKkG,UAWe,EAXGpF,IAAQA,EAWX,IAT5BA,EAS4B,EANjCd,KAAKiG,MAAMjG,KAAKkG,UAAYpF,EAMK,SACjCkF,EAAeG,SAASzB,IAC3BsB,EAAexF,KAAKkE,GAlBD,IAAM5D,EAqB7B,OAAOkF,GQsDcI,CAAqBf,KAWpCgB,CAAgBhB,GAChB,MACF,IAAK,mBAnCmB,CAACA,IAC7BtH,EAhB2B,CAACsH,GACTA,EAAKK,MAAK,CAACC,EAAGC,KAC/B,MAAMU,EAAYX,EAAEjI,SAAST,OACvBsJ,EAAYX,EAAElI,SAAST,OAC7B,OAAIsJ,EAAYD,EACP,EAELC,EAAYD,GACN,EAEH,KAMYE,CAAqBnB,KAmCpCoB,CAAsBpB,KASxBqB,CAAiBrB,EAAM5K,KA/FN,OCWrBkM,CAActB,IAGhBvK,SAASiE,iBAAiB,oBAAoB,KCnB9B,IAAS6H,EAAWC,EJiCJhH,EDkENiH,EKnGDF,EDoBNxB,GCpBiByB,EDoBDlM,ECnB1BoM,MDSO,sDCRZ,CACEC,OAAQ,MACRC,YAAa,gBAGdC,MAAMC,IACL,GAAIA,EAASC,GACX,OAAOD,EAASE,OAGlB,MAAM,IAAIC,MAAM,GAAGH,EAASI,UAAUJ,EAASK,iBAEhDN,MAAM7B,IACLuB,EAAUvB,MAEXoC,OAAOC,IACNb,EAAOa,MJoDXtD,EAAYrF,iBAAiB,UAAU,KAqBjB,MACtB,MAAM4I,EAAOvD,EAAYwD,MAAM,GACzBC,EAAWF,EAAKvI,KAAK0I,cAM3B,GAJgB/D,EAAWgE,MAAMC,GACxBH,EAASI,SAASD,KAGd,CACX,MAAME,EAAS,IAAIC,WAEnBD,EAAOnJ,iBAAiB,QAAQ,KAjBJ,IAACqJ,EAkB3B,GAAU3J,IAAMyJ,EAAOE,OAlBIA,EAmBHF,EAAOE,OAlBnC5D,GAAe5G,SAAQ8G,IACrBA,EAAQ1J,MAAM2J,gBAAkB,QAAQyD,SAvB1C/D,EAAc5H,UAAUT,OAAO,UAC/BH,EAAKY,UAAUG,IAAI,cACnB9B,SAASiE,iBAAiB,UAAW0F,OA0CnCyD,EAAOG,cAAcV,QAErBhN,EAAU,wDAvCV2N,GACA1G,OAGFrC,EAAsB2E,EAAmBC,EAAoBF,EAAiB,GArExD,IAqE4F,IAClH1E,EAAsB4E,EAAoBD,EAAmBD,GAvEtC,GAED,GAqE4F,IA3CpFpE,EA6CO,GAArB0E,GA5CV3G,SAAQ8G,IACZA,EAAQ3F,iBAAiB,SAAS,KAC5B2F,EAAQ6D,UACV1I,EAAIpD,UAAY,GAChBoD,EAAI7E,MAAMyG,OAAS,GACnB5B,EAAIpD,UAAUG,IAAI,qBAAqB8H,EAAQ3E,gBAyCrDuE,EAAkBvF,iBAAiB,SAAS,KAC1CsE,QCVFwB,GAAU9F,iBAAiB,UAAWgG,IAEtCF,GAAU9F,iBAAiB,SAAS,KAhDd,CAACyJ,IAGvB,GAA6B,IAAzBA,EAAOC,OAAOxL,OAEhB,OADA4H,GAAU6D,kBAAkB,kBACrB,EAIT,MAAMC,EAAOH,EAAOV,cAAczH,MAAM,KAAKoB,QAAQmH,GAAuB,IAAfA,EAAI3L,SAKjE,OAAI0L,EAAK1L,SAAW,IAAI4L,IAAIF,GAAMG,MAChCjE,GAAU6D,kBAAkB,kCACrB,GAGLC,EAAK1L,OAzCe,GA0CtB4H,GAAU6D,kBAAkB,8CACrB,GAOJC,EAAKI,OAAOH,GAAQA,EAAII,WAAW,OAKnCL,EAAKI,OAAOH,GA3CM,CAACA,GAOL,OAFHA,EAAIK,MAAMrE,IAsCDsE,CAAiBN,MAM1C/D,GAAU7J,MAAMmO,UAAY,GAC5BtE,GAAU6D,kBAAkB,KACrB,IAPL7D,GAAU6D,kBAAkB,iDACrB,IANP7D,GAAU6D,kBAAkB,yCACrB,IAqBFU,CAFavE,GAAU9E,SAG1B8E,GAAU7J,MAAMmO,UAAY,wBAC5BtE,GAAUwE,qBAMdvE,GAAa/F,iBAAiB,UAAWgG,IACzCD,GAAa/F,iBAAiB,SAAS,KACjC+F,GAAa/E,MAAM9C,OApFA,KAqFrB6H,GAAa4D,kBAAkB,iEAAmE5D,GAAa/E,MAAM9C,OArFhG,KAqF+H,UACpJ6H,GAAa9J,MAAMmO,UAAY,0BAE/BrE,GAAa4D,kBAAkB,IAC/B5D,GAAa9J,MAAMmO,UAAY,IAEjCrE,GAAauE,oBFMSvC,EIxFT,iDJyFfpE,EAAW3D,iBAAiB,UAAWtE,IACrCA,EAAI+C,iBK/ES,EAAC8L,EAASzN,EAAM+K,EAAWC,KACnCE,MAAMuC,EACX,CACEtC,OAAQ,OACRnL,SAGDqL,MAAMC,IACDA,EAASC,GACXR,IAEAC,OAGHY,OAAOC,IACNb,EAAOa,OLiET6B,CAASzC,EAAS,IAAI0C,SAAS/O,EAAI+B,QAASqH,EAAiBT,U","file":"main.bundle.js","sourcesContent":["const TIME_CLOSE_ALERT = 2000;\n\nconst getRandomInteger = (min, max) => {\n  if (min < 0 || max < 0) {\n    return false;\n  }\n  if (max < min) {\n    return Math.round(Math.random() * (min - max)) + max;\n  }\n  if (min === max) {\n    return min;\n  }\n  return Math.round(Math.random() * (max - min)) + min;\n};\n\nconst getRandomUniqElemets = (data, RANDOM_COUNT) => {\n  const randomUniqData = [];\n  while (randomUniqData.length < RANDOM_COUNT) {\n    const element = data[getRandomInteger(0, data.length - 1)];\n    if (!randomUniqData.includes(element)) {\n      randomUniqData.push(element);\n    }\n  }\n  return randomUniqData;\n};\n\nconst isEscEvent = (evt) => {\n  return evt.key === ('Escape' || 'Esc');\n};\n\nconst showAlert = (message) => {\n  const alertContainer = document.createElement('div');\n  alertContainer.style.zIndex = 1000;\n  alertContainer.style.position = 'absolute';\n  alertContainer.style.left = '50%';\n  alertContainer.style.top = '50%';\n  alertContainer.style.width = '320px';\n  alertContainer.style.height = 'auto';\n  alertContainer.style.transform = 'translate(-50%, -50%)';\n  alertContainer.style.padding = '10px 3px';\n  alertContainer.style.fontSize = '30px';\n  alertContainer.style.textAlign = 'center';\n  alertContainer.style.backgroundColor = 'tomato';\n\n  alertContainer.textContent = message;\n\n  document.body.append(alertContainer);\n\n  setTimeout(() => {\n    alertContainer.remove();\n  }, TIME_CLOSE_ALERT);\n};\n\nexport { getRandomInteger, getRandomUniqElemets, isEscEvent, showAlert };\n","import { isEscEvent } from './util.js';\n\nconst DEFAULT_VISIBLE_COMMENTS = 5;\n\nconst bigPic = document.querySelector('.big-picture');\nconst closeBigImg = bigPic.querySelector('.big-picture__cancel');\nconst socialCommentCountBlock = bigPic.querySelector('.social__comment-count');\nconst btnSocialCommentsLoader = bigPic.querySelector('.social__comments-loader');\nconst bigPicCommentsList = bigPic.querySelector('.social__comments');\n\nconst onLikesCountClick = (evt) => {\n  if (evt.target.classList.contains('likes-count--active')) {\n    evt.target.textContent = Number(evt.target.textContent) - 1;\n    evt.target.classList.remove('likes-count--active');\n    return;\n  } else {\n    evt.target.textContent = Number(evt.target.textContent) + 1;\n    evt.target.classList.add('likes-count--active');\n    return;\n  }\n};\n\nconst onLikesCountClickListener = () => {\n  const likesCount = document.querySelector('.likes-count');\n  likesCount.addEventListener('click', onLikesCountClick)\n};\n\n// фрагмент для комментариев\nconst commentsFragments = new DocumentFragment();\n// функция генерации элемента комментария\nconst createCommentElemnt = (item) => {\n  const commentElement = document.createElement('li');\n  commentElement.classList.add('social__comment')\n  commentElement.innerHTML = `<img\n      class=\"social__picture\"\n      src=\"${item.avatar}\"\n      alt=\"${item.name}\"\n      width=\"35\" height=\"35\">\n  <p class=\"social__text\">${item.message}</p>`\n  commentsFragments.appendChild(commentElement);\n};\n//  // вставляем в список комментариев - фото и текст автора комментария к конкретной фотографии\nconst renderCommets = (item) => {\n  const comments = item.comments;\n  comments.forEach(comment => {\n    bigPicCommentsList.innerHTML = '';\n    createCommentElemnt(comment);\n  })\n  bigPicCommentsList.appendChild(commentsFragments);\n};\n\nconst renderCommentsCount = (num, length) => {\n  socialCommentCountBlock.innerHTML = `${num} из <span class=\"comments-count\">${length}</span> комментариев`;\n};\n\nconst openBigPicture = () => {\n  bigPic.classList.remove('hidden');\n  document.body.classList.add('modal-open')\n  document.addEventListener('keydown', onEscClosePreview);\n\n  // при открытии запускаем проверку на комменты, показываем разрешенное кол-во\n  showVisibleComments();\n  onLikesCountClickListener();\n};\n\nconst closeBigPicture = () => {\n  bigPic.classList.add('hidden');\n  document.body.classList.remove('modal-open');\n  document.removeEventListener('keydown', onEscClosePreview);\n  btnSocialCommentsLoader.removeEventListener('click', onBtnCommentShowMore);\n\n  // при закрытии большой картинки - снова приравниваем к 5 допустимое число видимых комментариев\n  visibleCommentsLength = DEFAULT_VISIBLE_COMMENTS;\n};\n\nconst onEscClosePreview = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    closeBigPicture();\n  }\n};\n\nconst showBigPicture = (minPicture) => {\n  bigPic.querySelector('.big-picture__img > img').src = minPicture.url;\n  bigPic.querySelector('.social__caption').textContent = minPicture.description;\n  bigPic.querySelector('.likes-count').textContent = minPicture.likes;\n  bigPic.querySelector('.comments-count').textContent = minPicture.comments.length;\n\n  openBigPicture();\n  onBtnCommetLoaderListener();\n  closeBigImg.addEventListener('click', () => {\n    closeBigPicture();\n  });\n};\n\n// допустимое число видимых комментариев\nlet visibleCommentsLength = DEFAULT_VISIBLE_COMMENTS;\n// проверяем кол-во комментариев, если их меньше 5 - кнопке \"загрузть еще\"добавялем класс Hidden\n// если их больше 5 - удаляем у кнопки класс hidden\n//  если больше 5 - находим все комментарии с индексом равному или больше числу visibleCommentsLength и добавляем их класс hidden\nconst showVisibleComments = () => {\n  const comments = document.querySelectorAll('.social__comment');\n  if (comments.length > DEFAULT_VISIBLE_COMMENTS) {\n    btnSocialCommentsLoader.classList.remove('hidden');\n    renderCommentsCount(visibleCommentsLength, comments.length);\n    comments.forEach((comment, index) => {\n      if (index >= visibleCommentsLength) {\n        comment.classList.add('hidden');\n      }\n      else {\n        comment.classList.remove('hidden');\n      }\n    })\n  }\n  if (comments.length <= visibleCommentsLength) {\n    renderCommentsCount(comments.length, comments.length);\n    btnSocialCommentsLoader.classList.add('hidden');\n  }\n};\n\nconst onBtnCommentShowMore = (evt) => {\n  evt.preventDefault();\n  // на каждый клик по кнопке \"показать еще\" прибавялем значение видимых комментариев на 5\n  visibleCommentsLength = visibleCommentsLength + DEFAULT_VISIBLE_COMMENTS;\n  // и запускаем проверку чтобы отобразить\n  showVisibleComments();\n};\n\nconst onBtnCommetLoaderListener = () => {\n  btnSocialCommentsLoader.addEventListener('click', onBtnCommentShowMore)\n};\nexport { showBigPicture, renderCommets };\n","import { showBigPicture, renderCommets } from './big-picture.js';\n\nconst createPicturesElemts = (pictures) => {\n  // родитель в который надо вставить сгенирированыне элементы\n  const picturesElementsList = document.querySelector('.pictures');\n  // html шаблон который будем копировать\n  const pictureElementTemplate = document.querySelector('#picture').content.querySelector('.picture');\n  const similiarPicturesFragment = document.createDocumentFragment();\n\n  pictures.forEach((picture) => {\n    // копируем шаблон со всем его содержимым true в новую переменную\n    const pictureElemet = pictureElementTemplate.cloneNode(true);\n\n    pictureElemet.querySelector('.picture__img').src = picture.url;\n    pictureElemet.querySelector('.picture__likes').textContent = picture.likes;\n    pictureElemet.querySelector('.picture__comments').textContent = picture.comments.length;\n    pictureElemet.querySelector('.picture__img').alt = picture.description;\n    // добавляем каждый элемент в созданный DocumentFragment\n    similiarPicturesFragment.appendChild(pictureElemet);\n\n    pictureElemet.addEventListener('click', (evt) => {\n      evt.preventDefault();\n      renderCommets(picture);\n      showBigPicture(picture);\n    })\n  })\n  // добваляем в родитель фрагмент с готовыми картинками\n  picturesElementsList.appendChild(similiarPicturesFragment);\n};\n\nexport { createPicturesElemts };\n","const uploadImg = document.querySelector('.img-upload__preview > img');\n\nconst setImgTransformeStyle = (img, value) => {\n  img.style.transform = `scale(${value})`;\n};\n\nconst getInputValue = (input, newValue, img) => {\n  const arrayInValue = input.value.split('%');\n  const numInValue = arrayInValue[0];\n  let newNum = numInValue;\n  let newArrayValue = [];\n  newNum = +numInValue + newValue;\n  newArrayValue.push(newNum + '%');\n  input.value = newArrayValue;\n  setImgTransformeStyle(img, newNum / 100);\n};\n\nconst onbuttonSetScaleValue = (button, button2, input, btnValue, btnOffValue, img) => {\n  button.addEventListener('click', () => {\n    button2.removeAttribute('disabled', 'disabled');\n    if (input.value === Math.abs(btnOffValue) + '%') {\n      button.setAttribute('disabled', 'disabled');\n    } else {\n      button.removeAttribute('disabled', 'disabled');\n      getInputValue(input, btnValue, img);\n    }\n  });\n};\n\nconst resetScaleImage = () => {\n  uploadImg.style.transform = '';\n};\n\nexport { onbuttonSetScaleValue, resetScaleImage };\n","/* global noUiSlider:readonly */\nconst CHROME_SEPIA_OPTIONS = {\n  range: {\n    min: 0,\n    max: 1,\n  },\n  start: 1,\n  step: 0.1,\n};\n\nconst MARVIN_OPTIONS = {\n  range: {\n    min: 0,\n    max: 100,\n  },\n  start: 100,\n  step: 1,\n};\n\nconst PHOBOS_OPTIONS = {\n  range: {\n    min: 0,\n    max: 3,\n  },\n  start: 3,\n  step: 0.1,\n};\n\nconst HEAT_OPTIONS = {\n  range: {\n    min: 1,\n    max: 3,\n  },\n  start: 3,\n  step: 0.1,\n}\n\nconst sliderWrapper = document.querySelector('.img-upload__effect-level');\nconst sliderFilter = document.querySelector('.effect-level__slider');\nconst uploadImg = document.querySelector('.img-upload__preview > img');\nconst filterControlsWrapper = document.querySelector('.img-upload__effects');\nconst effectLevel = document.querySelector('.effect-level__value');\n\nconst resetEffectImage = () => {\n  effectLevel.value = '';\n  uploadImg.style.filter = 'none';\n};\n\nconst createSlider = (sliderElement) => {\n  noUiSlider.create(sliderElement, {\n    range: {\n      min: 0,\n      max: 100,\n    },\n    start: 50,\n    format: {\n      to: function (value) {\n        if (Number.isInteger(value)) {\n          return value.toFixed(0);\n        }\n        return value.toFixed(1);\n      },\n      from: function (value) {\n        return parseFloat(value);\n      },\n    },\n  });\n};\n\nconst initSlider = (sliderElement) => {\n  const sliderBase = document.querySelector('.noUi-base');\n  // чтобы не было реинициализации - иначе ошибка, проверям есть ли слайдер?\n  if (!sliderBase) {\n    createSlider(sliderElement);\n  }\n  sliderWrapper.classList.add('hidden');\n};\n\nconst changeFilterImageValue = (sliderElement, img) => {\n  sliderElement.noUiSlider.on('update', (_, handle, unencoded) => {\n    // при отправке формы или сбросе - не забыть сккинуть и значение effect.value\n    effectLevel.value = unencoded[handle];\n    if (img.classList.contains('effects__preview--chrome')) {\n      img.style.filter = `grayscale(${unencoded[handle]})`;\n    }\n    if (img.classList.contains('effects__preview--sepia')) {\n      img.style.filter = `sepia(${unencoded[handle]})`;\n    }\n    if (img.classList.contains('effects__preview--marvin')) {\n      img.style.filter = `invert(${unencoded[handle]}%)`;\n    }\n    if (img.classList.contains('effects__preview--phobos')) {\n      img.style.filter = `blur(${unencoded[handle]}px)`;\n    }\n    if (img.classList.contains('effects__preview--heat')) {\n      img.style.filter = `brightness(${unencoded[handle]})`;\n    }\n  });\n};\n\nconst onRadioEffectBtnClick = (evt) => {\n  if (evt.target.value === 'none') {\n    uploadImg.style.filter = '';\n    sliderWrapper.classList.add('hidden');\n  }\n  if (evt.target.value === 'chrome' || evt.target.value === 'sepia') {\n    sliderWrapper.classList.remove('hidden');\n    sliderFilter.noUiSlider.updateOptions(CHROME_SEPIA_OPTIONS);\n  }\n  if (evt.target.value === 'marvin') {\n    sliderWrapper.classList.remove('hidden');\n    sliderFilter.noUiSlider.updateOptions(MARVIN_OPTIONS);\n  }\n  if (evt.target.value === 'phobos') {\n    sliderWrapper.classList.remove('hidden');\n    sliderFilter.noUiSlider.updateOptions(PHOBOS_OPTIONS);\n  }\n  if (evt.target.value === 'heat') {\n    sliderWrapper.classList.remove('hidden');\n    sliderFilter.noUiSlider.updateOptions(HEAT_OPTIONS);\n  }\n};\n\nconst changeSliderOption = () => {\n  filterControlsWrapper.addEventListener('click', onRadioEffectBtnClick)\n};\n\nconst removeFilterControlsListener = () => {\n  filterControlsWrapper.removeEventListener('click', onRadioEffectBtnClick)\n};\n\nconst setSliderImgFilter = () => {\n  initSlider(sliderFilter);\n  changeFilterImageValue(sliderFilter, uploadImg);\n  changeSliderOption();\n};\n\nexport { setSliderImgFilter, resetEffectImage, removeFilterControlsListener };\n","import { isEscEvent } from './util.js';\nimport { sendData } from './get-send-data.js';\nimport { resetEffectImage } from './slider-img-filter.js';\nimport { resetScaleImage } from './scale-upload-img.js';\nimport { closeUploadModal } from './user-modal.js';\n\nconst uploadForm = document.querySelector('#upload-select-image');\n\nconst errorMessageTemplate = document.querySelector('#error').content.querySelector('.error');\nconst mainContentWrap = document.querySelector('main');\n\nconst resetFormsData = () => {\n  uploadForm.reset();\n  resetEffectImage();\n  resetScaleImage();\n};\n\nconst onErrorPopupCloseKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    closePopupError();\n  }\n};\n\nconst closePopupError = () => {\n  document.querySelector('.error').remove();\n  document.removeEventListener('keydown', onErrorPopupCloseKeydown);\n  document.removeEventListener('click', onErrorPopupCloseClickAway);\n};\n\nconst onErrorPopupCloseClickAway = (evt) => {\n  if (evt.target.closest('.error__inner') === null) {\n    closePopupError();\n  }\n};\n\nconst onErrorPopupCloseClick = (evt) => {\n  closePopupError();\n  evt.target.removeEventListener('click', onErrorPopupCloseClick);\n};\n\nconst showErrorPopupMessage = () => {\n  const messageElement = errorMessageTemplate.cloneNode(true);\n  mainContentWrap.append(messageElement);\n  const closeErrPopupBtn = document.querySelector('.error__button');\n  closeErrPopupBtn.addEventListener('click', onErrorPopupCloseClick);\n  document.addEventListener('keydown', onErrorPopupCloseKeydown);\n  document.addEventListener('click', onErrorPopupCloseClickAway);\n};\n\nconst onFailSubmit = () => {\n  closeUploadModal();\n  resetFormsData();\n  showErrorPopupMessage();\n};\n\n//////// показ и скрытие сообщени при усешной отправки формы\nconst successMessageTemplate = document.querySelector('#success').content.querySelector('.success');\n\nconst closeSuccessPopup = () => {\n  document.querySelector('.success').remove();\n  document.removeEventListener('keydown', onSuccessPopupCloseKeydown);\n  document.removeEventListener('click', onSuccessPopupCloseClickAway);\n};\n\nconst onSuccessPopupCloseClickAway = (evt) => {\n  if (evt.target.closest('.success__inner') === null) {\n    closeSuccessPopup();\n  }\n};\n\nconst onSuccessPopupCloseKeydown = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    closeSuccessPopup();\n  }\n};\n\nconst onSuccessPopupCloseClick = (evt) => {\n  closeSuccessPopup();\n  evt.target.removeEventListener('click', onSuccessPopupCloseClick);\n};\n\nconst showSuccessPopupMessage = () => {\n  const messageElement = successMessageTemplate.cloneNode(true);\n  mainContentWrap.append(messageElement);\n  const closeSuccessPopupBtn = document.querySelector('.success__button');\n  closeSuccessPopupBtn.addEventListener('click', onSuccessPopupCloseClick);\n  document.addEventListener('keydown', onSuccessPopupCloseKeydown);\n  document.addEventListener('click', onSuccessPopupCloseClickAway);\n};\n\n///////// отправка формы нового объяаления\nconst onSuccessSubmit = () => {\n  closeUploadModal();\n  resetFormsData();\n  showSuccessPopupMessage();\n};\n\nconst onSubmitSendData = (sendURL) => {\n  uploadForm.addEventListener('submit', (evt) => {\n    evt.preventDefault();\n    sendData(sendURL, new FormData(evt.target), onSuccessSubmit, onFailSubmit)\n  });\n};\n\nexport { onSubmitSendData, showErrorPopupMessage, showSuccessPopupMessage, resetFormsData }\n","import { isEscEvent, showAlert } from './util.js';\nimport { onbuttonSetScaleValue } from './scale-upload-img.js';\nimport { setSliderImgFilter, removeFilterControlsListener } from './slider-img-filter.js';\nimport { resetFormsData } from './form.js';\n\nconst SCALE_STEP_VALUE = 25;\nconst SCALE_MAX_VALUE = 100;\nconst SCALE_MIN_VALUE = 25;\nconst FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\n\nconst defaultImg = 'img/upload-default-image.jpg';\n\nconst scaleValueInput = document.querySelector('.scale__control--value');\nconst scaleButtonBigger = document.querySelector('.scale__control--bigger');\nconst scaleButtonSmaller = document.querySelector('.scale__control--smaller');\n\nconst uploadInput = document.querySelector('#upload-file');\nconst uploadOverlay = document.querySelector('.img-upload__overlay');\nconst body = document.body;\nconst closeCancelButton = document.querySelector('#upload-cancel');\n\nconst uploadImg = document.querySelector('.img-upload__preview > img');\nconst filterControlInputs = document.querySelectorAll('.effects__radio');\nconst effectsPreview = document.querySelectorAll('.effects__preview');\n\n\nconst setDefaultImgSrc = () => {\n  uploadImg.src = defaultImg;\n  effectsPreview.forEach(element => {\n    element.style.backgroundImage = `url(${defaultImg})`;\n  })\n};\n\nconst changeFilterImg = (array, img) => {\n  array.forEach(element => {\n    element.addEventListener('click', () => {\n      if (element.checked) {\n        img.classList = '';\n        img.style.filter = '';\n        img.classList.add(`effects__preview--${element.value}`)\n      }\n    })\n  });\n};\n\nconst onModalClose = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    closeUploadModal();\n  }\n};\n\nconst closeUploadModal = () => {\n  uploadOverlay.classList.add('hidden');\n  body.classList.remove('modal-open');\n  document.removeEventListener('keydown', onModalClose);\n  uploadInput.value = '';\n  uploadImg.classList = '';\n  setDefaultImgSrc();\n  resetFormsData();\n  removeFilterControlsListener();\n};\n\nconst openUploadModal = () => {\n  uploadOverlay.classList.remove('hidden');\n  body.classList.add('modal-open');\n  document.addEventListener('keydown', onModalClose);\n};\n\nconst onUploadShowModal = () => {\n  uploadInput.addEventListener('change', () => {\n    renderUploadImg();\n    setSliderImgFilter();\n  });\n\n  onbuttonSetScaleValue(scaleButtonBigger, scaleButtonSmaller, scaleValueInput, +SCALE_STEP_VALUE, SCALE_MAX_VALUE, uploadImg);\n  onbuttonSetScaleValue(scaleButtonSmaller, scaleButtonBigger, scaleValueInput, -SCALE_STEP_VALUE, SCALE_MIN_VALUE, uploadImg);\n\n  changeFilterImg(filterControlInputs, uploadImg);\n\n  closeCancelButton.addEventListener('click', () => {\n    closeUploadModal();\n  })\n};\n\nconst renderEffectsPreviewImg = (result) => {\n  effectsPreview.forEach(element => {\n    element.style.backgroundImage = `url('${result}')`;\n  })\n};\n\nconst renderUploadImg = () => {\n  const file = uploadInput.files[0];\n  const fileName = file.name.toLowerCase();\n\n  const matches = FILE_TYPES.some((it) => {\n    return fileName.endsWith(it);\n  });\n\n  if (matches) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', () => {\n      uploadImg.src = reader.result;\n      renderEffectsPreviewImg(reader.result);\n      openUploadModal();\n    });\n\n    reader.readAsDataURL(file);\n  } else {\n    showAlert('Загрузите изобржание в формате: gif, jpg, jpeg, png');\n  }\n};\n\nexport { onUploadShowModal, closeUploadModal };\n","import { isEscEvent } from './util.js';\n\nconst COMMENT_MAX_LENGTH = 140;\nconst VALID_TAGS_LENGTH = 5;\n// создадим регулярное выражение\n// \\w - латинский алфавит\n// \\u0400-\\u04FF  - кириллица\nconst REG_EXP = /^#[\\w,\\u0400-\\u04FF]{1,19}$/;\n\nconst uploadOverlay = document.querySelector('.img-upload__overlay');\nconst inputTags = uploadOverlay.querySelector('.text__hashtags');\nconst commentInput = uploadOverlay.querySelector('.text__description');\n\n// валидный тег - это тот что начинается с решетки и дальше содержит от 1 до 19\n// любого алфавитно-цифрового символа из базового латинского алфавита [A-Za-z0-9_]\nconst checkValidityTag = (tag) => {\n  // проверяем тег на совадение нашему проварилу минимум два символа решетка и еще буква или цифра\n  // если метод match не нешал совпадение то значение\n  // matchIt будет присвоено null и в этом случаем получим matchIt !== null вернет false, проверка не пройдена\n  // https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Global_Objects/String/match\n  const matchIt = tag.match(REG_EXP);\n  // -------- возвращаем результут проверки соответсвия правилу\n  return matchIt !== null;\n};\n// чтобы получить отдельный тег из инпута надо разобрать введеный текст\nconst runValidateTags = (string) => {\n  // trim удаляет пустые пробелы и длина введеного в инпут будет равно 0 - значит ошибка\n  // защита от введения пустоты))\n  if (string.trim().length === 0) {\n    inputTags.setCustomValidity('введите текст');\n    return false;\n  }\n  // далее разбиваем введеный текст на отдельные слова, получаем массив тегов и проверяем чтобы его длинна\n  // была не равна 0, значит хотя бы 1 тег-слово есть\n  const tags = string.toLowerCase().split(' ').filter((tag) => tag.length !== 0);\n  // Метод доступа size возвращает количество (уникальных) элементов в объекте Set\n  // т.е если введны все уникальне теги то длина оригинального массива и кол-во уникальных тегов полученных new Set(tags).size\n  // будут равны, тогда код будет выполняться дальше\n  // если ввели одниковые теги будет ошибка\n  if (tags.length !== new Set(tags).size) {\n    inputTags.setCustomValidity('Хэштеги должны быть уникальны');\n    return false;\n  }\n  // если длина массива с тегами больше 5 - ошибка\n  if (tags.length > VALID_TAGS_LENGTH) {\n    inputTags.setCustomValidity('Количество хэштегов не должно превышать 5');\n    return false;\n  }\n  // проверка начала каждого тега, если не решетка - ошибка\n  // хотя у нас уже проверяется решетка регулярным варажением\n  // но чтобы выводить сообщение об конкретной ошибке добавим еще эту проверку\n\n  // проходим по каждому тегу\n  if (!tags.every((tag) => tag.startsWith('#'))) {\n    inputTags.setCustomValidity('Хэштег должен начинаться с символа #');\n    return false;\n  }\n  // проверяем тег по нашему регулярному выражению\n  if (!tags.every((tag) => checkValidityTag(tag))) {\n    inputTags.setCustomValidity('Хэштег может состоять только из букв и чисел');\n    return false;\n  }\n\n  // если всё тру ошибка сбрасывается\n  inputTags.style.boxShadow = '';\n  inputTags.setCustomValidity('');\n  return true;\n};\n\nconst onInputTagValidateListener = () => {\n  // как только мы в инпуте, вешает обработчик ECS\n  inputTags.addEventListener('keydown', stopPropagationKeyEsc);\n\n  inputTags.addEventListener('input', () => {\n    const inputText = inputTags.value;\n    // если проверка возвращает false - выводится ошибка\n    if (!runValidateTags(inputText)) {\n      inputTags.style.boxShadow = 'inset 0 0 3px 1px red';\n      inputTags.reportValidity();\n    }\n  });\n};\n\nconst onInputCommentValidateListener = () => {\n  commentInput.addEventListener('keydown', stopPropagationKeyEsc);\n  commentInput.addEventListener('input', () => {\n    if (commentInput.value.length > COMMENT_MAX_LENGTH) {\n      commentInput.setCustomValidity('Комментарий не должен превышать 140 символов; Удалите лишние ' + (commentInput.value.length - COMMENT_MAX_LENGTH) + ' симв.')\n      commentInput.style.boxShadow = 'inset 0 0 5px 3px red';\n    } else {\n      commentInput.setCustomValidity('');\n      commentInput.style.boxShadow = '';\n    }\n    commentInput.reportValidity();\n  });\n};\n\nconst stopPropagationKeyEsc = (evt) => {\n  if (isEscEvent(evt)) {\n    evt.preventDefault();\n    // прекращает слушать нажатую кнопку\n    // т.е модальное окно по клику на ECS не закроется\n    evt.stopPropagation();\n  }\n};\n\nexport { onInputTagValidateListener, onInputCommentValidateListener };\n\n","/* global _:readonly */\nimport { createPicturesElemts } from './create-pictures-elemtns.js';\nimport { getRandomUniqElemets } from './util.js';\n\nconst RANDOM_COUNT = 10;\nconst RERENDER_DELAY = 500;\n\nconst imgFilter = document.querySelector('.img-filters');\nconst filterForm = imgFilter.querySelector('.img-filters__form');\nconst filterBtns = filterForm.querySelectorAll('.img-filters__button');\n\nconst switchFilterBtnActiveClass = () => {\n  filterForm.addEventListener('click', (evt) => {\n    filterBtns.forEach((btn) => {\n      if (evt.target === btn) {\n        if (!evt.target.classList.contains('.img-filters__button--active')) {\n          return evt.target.classList.add('img-filters__button--active');\n        }\n      } else {\n        btn.classList.remove('img-filters__button--active')\n      }\n    })\n  })\n};\n\nconst showImgFilter = () => {\n  switchFilterBtnActiveClass();\n  if (imgFilter) {\n    if (imgFilter.classList.contains('img-filters--inactive')) {\n      return imgFilter.classList.remove('img-filters--inactive');\n    }\n  }\n};\n\nconst delPictures = () => {\n  document.querySelectorAll('.picture').forEach(picture => {\n    picture.remove();\n  });\n};\n// «Обсуждаемые» — фотографии, отсортированные в порядке убывания количества комментариев.\nconst sortImagesByComments = (data) => {\n  const sortedData = data.sort((a, b) => {\n    const commentsA = a.comments.length;\n    const commentsB = b.comments.length;\n    if (commentsB > commentsA) {\n      return 1;\n    }\n    if (commentsB < commentsA) {\n      return -1;\n    }\n    return 0;\n  });\n  return sortedData;\n};\n\nconst getMostCommentedImges = (data) => {\n  createPicturesElemts(sortImagesByComments(data));\n};\n\nconst sortImagesById = (data) => {\n  const sortedData = data.sort((a, b) => {\n    if (a.id > b.id) {\n      return 1;\n    }\n    if (a.id < b.id) {\n      return -1;\n    }\n    return 0;\n  });\n  return sortedData;\n};\n\nconst getDefaultImages = (data) => {\n  createPicturesElemts(sortImagesById(data));\n};\n\nconst getRandomImages = (data) => {\n  createPicturesElemts(getRandomUniqElemets(data, RANDOM_COUNT));\n};\n\nconst onFilterBtnClick = (data, evt) => {\n  delPictures();\n  if (evt.target.classList.contains('img-filters__button')) {\n    switch (evt.target.id) {\n      case 'filter-default':\n        getDefaultImages(data);\n        break;\n      case 'filter-random':\n        getRandomImages(data);\n        break;\n      case 'filter-discussed':\n        getMostCommentedImges(data);\n        break;\n    }\n  }\n};\n\nconst sortingImages = (data) => {\n  filterForm.addEventListener('click', _.debounce(\n    ((evt) => {\n      onFilterBtnClick(data, evt)\n    }), RERENDER_DELAY))\n};\n\nexport { showImgFilter, sortingImages };\n","// надо делать лайки и счетчик +/- лайк\nimport { createPicturesElemts } from './create-pictures-elemtns.js';\nimport { onUploadShowModal } from './user-modal.js';\nimport { onInputTagValidateListener, onInputCommentValidateListener } from './tags-comment-validate.js';\nimport { getData } from './get-send-data.js';\nimport { showAlert } from './util.js';\nimport { onSubmitSendData } from './form.js';\n\nimport { showImgFilter, sortingImages } from './img-filter.js';\n\nconst GET_URL = 'https://22.javascript.pages.academy/kekstagram/data';\nconst SEND_URL = 'https://22.javascript.pages.academy/kekstagram';\n\nconst getDataSuccess = (data) => {\n  createPicturesElemts(data);\n  showImgFilter();\n  sortingImages(data);\n};\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  getData(GET_URL, getDataSuccess, showAlert);\n  onUploadShowModal();\n  onInputTagValidateListener();\n  onInputCommentValidateListener();\n  onSubmitSendData(SEND_URL);\n});\n","const getData = (getUrl, onSuccess, onFail) => {\n  return fetch(getUrl,\n    {\n      method: 'GET',\n      credentials: 'same-origin',\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      }\n\n      throw new Error(`${response.status} ${response.statusText}`);\n    })\n    .then((data) => {\n      onSuccess(data);\n    })\n    .catch((err) => {\n      onFail(err);\n    });\n};\n\nconst sendData = (sendUrl, body, onSuccess, onFail) => {\n  return fetch(sendUrl,\n    {\n      method: 'POST',\n      body,\n    },\n  )\n    .then((response) => {\n      if (response.ok) {\n        onSuccess();\n      } else {\n        onFail();\n      }\n    })\n    .catch((err) => {\n      onFail(err);\n    });\n};\n\nexport { getData, sendData };\n"],"sourceRoot":""}